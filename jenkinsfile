pipeline {
    environment {
        registry = "varavkoyv/deploying"
        registryCredential = "docker_hub"
        dockerImage = ""
        path_previos_file = "/var/lib/jenkins/workspace/deploying/previos_dockerfile"
        path_file = "/var/lib/jenkins/workspace/deploying/docker/Dockerfile"

    }
    agent any
    stages {

        stage('check') {
            steps {
                script {
                    v = sh(returnStdout: true, script: ''' #!/bin/bash
                        if [ -z "$(diff -q $path_previos_file  $path_file)" ]; then
                        return 1
                        else
                        return 0                   
                        fi
                        ''')
                    print v
                }
            }
        }    


